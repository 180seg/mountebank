<p>The <code>exists</code> predicate isn't particularly useful for the TCP
protocol, as it's mainly meant for list elements like HTTP headers.  It will,
however, match if there was data sent.</p>

<pre><code data-test-id='tcp exists example'
           data-test-step='1'
           data-test-type='http'>
POST /imposters HTTP/1.1
Host: localhost:<%= port %>
Accept: application/json
Content-Type: application/json

{
  "port": 4551,
  "protocol": "tcp",
  "mode": "binary",
  "stubs": [<strong class='highlight1'>
    {
      "responses": [{ "is": { "data": "first response" } }],
      "predicates": { "data": { "exists": true } }
    }</strong>,<strong class='highlight2'>
    {
      "responses": [{ "is": { "data": "second response" } }],
      "predicates": { "data": { "exists": false } }
    }</strong>
  ]
}
</code></pre>

<p>The first stub always matches if any data was sent:</p>

<pre><code data-test-id='tcp exists example'
           data-test-step='2'
           data-test-type='exec'>
echo '<strong class='highlight1'>AQIDBA==</strong>' | base64 --decode | nc localhost 4551
</code></pre>

<pre><code data-test-id='tcp exists example'
           data-test-verify-step='2'>
<strong class='highlight1'>first response</strong>
</code></pre>

<p>The second stub matches if no data was sent (other than opening the TCP connection):</p>

<pre><code data-test-id='tcp exists example'
           data-test-step='3'
           data-test-type='exec'>
echo <strong class='highlight2'>''</strong> | nc localhost 4551
</code></pre>

<pre><code data-test-id='tcp exists example'
           data-test-verify-step='3'>
<strong class='highlight2'>second response</strong>
</code></pre>

<code class='hidden' data-test-id='tcp exists example'
                     data-test-step='4'
                     data-test-type='http'>
GET /imposters/4551 HTTP/1.1
Host: localhost:<%= port %>
Accept: application/json
</code>

<code class='hidden' data-test-id='tcp exists example'
                     data-test-verify-step='4'
                     data-test-type='http'
                     data-test-ignore-lines='["^Date", "requestFrom", "timestamp"]'>
HTTP/1.1 200 OK
Vary: Accept
Content-Type: application/json
Content-Length: 1612
Date: Thu, 09 Jan 2014 02:27:21 GMT
Connection: keep-alive

{
  "protocol": "tcp",
  "port": 4551,
  "mode": "text",
  "requests": [
    {
      "data": "FIRST REQUEST\n"
    },
    {
      "data": "Second Request\n"
    }
  ],
  "stubs": [
    {
      "responses": [
        {
          "exists": {
            "data": "first response"
          }
        }
      ],
      "predicates": {
        "data": {
          "exists": "first request\n"
        }
      },
      "exists": [
        {
          "timestamp": "2014-01-09T02:27:21.859Z",
          "request": {
            "requestFrom": "127.0.0.1:58508",
            "data": "FIRST REQUEST\n"
          },
          "response": {
            "data": "first response"
          }
        }
      ]
    },
    {
      "responses": [
        {
          "exists": {
            "data": "second response"
          }
        }
      ],
      "predicates": {
        "data": {
          "exists": "second request\n"
        }
      },
      "exists": [
        {
          "timestamp": "2014-01-09T02:27:21.872Z",
          "request": {
            "requestFrom": "127.0.0.1:58510",
            "data": "Second Request\n"
          },
          "response": {
            "data": "second response"
          }
        }
      ]
    },
    {
      "responses": [
        {
          "exists": {
            "data": "third response"
          }
        }
      ],
      "predicates": {
        "data": {
          "exists": "second request\n"
        }
      }
    }
  ],
  "_links": {
    "self": {
      "href": "http://localhost:<%= port %>/imposters/4551"
    }
  }
}
</code>

<code class='hidden' data-test-id='tcp exists example'
                     data-test-step='5'
                     data-test-type='http'>
DELETE /imposters/4551 HTTP/1.1
Host: localhost:<%= port %>
Accept: application/json
</code>
