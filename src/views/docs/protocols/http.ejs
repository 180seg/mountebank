<% include ../../_header %>

<h1>http</h1>

<h2>Imposter Creation Parameters</h2>

<table>
  <tr>
    <th>Parameter</th>
    <th>Options</th>
    <th>Required?</th>
    <th>Default</th>
    <th>Description</th>
  </tr>
  <tr>
    <td><code>protocol</code></td>
    <td><code>http</code></td>
    <td>Yes</td>
    <td>N/A</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td><code>port</code></td>
    <td>Any valid port number</td>
    <td>No</td>
    <td>A randomly assigned port.  mountebank will return the actual value
    in the <code>POST</code> response.</td>
    <td>The port to run the imposter on.</td>
  </tr>
  <tr>
    <td><code>name</code></td>
    <td>Any string</td>
    <td>No</td>
    <td>empty string</td>
    <td>Included in the logs, useful when multiple imposters are set up.</td>
  </tr>
  <tr>
    <td><code>stubs</code></td>
    <td>A stub request.</td>
    <td>No</td>
    <td><code>{
      "is": {
        "statusCode": 200,
        "headers": { "connection": "close"},
        "body": ""
      }
    }</code></td>
    <td>Defines the response to send when certain conditions are met.  See examples
    below.</td>
  </tr>
</table>

<h2>HTTP Requests</h2>

<table>
  <tr>
      <th>Field</th>
      <th>Description</th>
      <th>Type</th>
  </tr>
  <tr>
    <td><code>requestFrom</code></td>
    <td>The client socket, primarily used for logging and debugging.</td>
    <td>string</td>
  </tr>
  <tr>
      <td><code>path</code></td>
      <td>The path of the request, without the querystring</td>
      <td>string</td>
  </tr>
  <tr>
      <td><code>query</code></td>
      <td>The querystring of the request</td>
      <td>object</td>
  </tr>
  <tr>
      <td><code>method</code></td>
      <td>The request method</td>
      <td>string</td>
  </tr>
  <tr>
      <td><code>headers</code></td>
      <td>The HTTP headers</td>
      <td>object</td>
  </tr>
  <tr>
      <td><code>body</code></td>
      <td>The request body</td>
      <td>string</td>
  </tr>
</table>

<h2>HTTP Responses</h2>

<table>
  <tr>
    <th>Field</th>
    <th>Type</th>
    <th>Default</th>
  </tr>
  <tr>
    <td><code>statusCode</code></td>
    <td>int</td>
    <td><code>200</code></td>
  </tr>
  <tr>
    <td><code>headers</code></td>
    <td>object</td>
    <td><code>{ "Connection": "close" }</code></td>
  </tr>
  <tr>
    <td><code>body</code></td>
    <td>string</td>
    <td><code>""</code></td>
  </tr>
</table>

<h2>Examples</h2>

<h3>Predicates</h3>

<section class="accordion">
  <div>
    <input id="is" name="is" type="checkbox" />
      <label for="is">is</label>
      <section>
        <% include http/is %>
      </section>
  </div>
  <div>
    <input id="contains" name="contains" type="checkbox" />
      <label for="contains">contains</label>
      <section>
        <p>Some content... </p>
      </section>
  </div>
  <div>
    <input id="startsWith" name="startsWith" type="checkbox" />
    <label for="startsWith">startsWith</label>
    <section>
      <p>Some content... </p>
    </section>
  </div>
  <div>
    <input id="endsWith" name="endsWith" type="checkbox" />
    <label for="endsWith">endsWith</label>
    <section>
      <p>Some content... </p>
    </section>
  </div>
  <div>
    <input id="matches" name="matches" type="checkbox" />
    <label for="matches">matches</label>
    <section>
      <p>Some content... </p>
    </section>
  </div>
  <div>
    <input id="exists" name="exists" type="checkbox" />
    <label for="exists">exists</label>
    <section>
      <p>Some content... </p>
    </section>
  </div>
  <div>
    <input id="not" name="not" type="checkbox" />
    <label for="not">not</label>
    <section>
      <p>Some content... </p>
    </section>
  </div>
  <div>
    <input id="or" name="or" type="checkbox" />
    <label for="or">or</label>
    <section>
      <p>Some content... </p>
    </section>
  </div>
  <div>
    <input id="and" name="and" type="checkbox" />
    <label for="and">and</label>
    <section>
      <p>Some content... </p>
    </section>
  </div>
  <div>
    <input id="inject" name="inject" type="checkbox" />
    <label for="inject">inject</label>
    <section>
      <p>Some content... </p>
    </section>
  </div>
</section>

<% include ../../_footer %>
